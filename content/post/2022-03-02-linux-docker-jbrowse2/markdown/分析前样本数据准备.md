### 一.准备样本列表(id.txt)

1. YHB、YHH、YHT、YHF这些前缀去掉;
    老版编号{ B：血液 T：新鲜组织 F：FFPE 切片等 H：体液，如腹水，积液，尿液等 }

  新版编号：

  ![image-20210708124659848](C:\Users\admin\Desktop\image-20210708124659848.png)

2. 新版编号一般如果是全长编号（18/19 长度如：B2107020040PL01S01/LJ2107020030FL01S01）则不需要处理；如果是短编号(如B2101100038PL01/B2103230008/LJ2103130093)则在**每个编号后面加***，或者从样本中心表格中**查询完整编号**；如果给到的是S开头的编号（如S20012190）则需要查询对应的生信分析编号（如B2107020040PL01S01/LJ2107020030FL01S01）

3. 最后保存为如下内容（注意字符串前后是否有空格）：
    ![image-20210423094744592](C:\Users\admin\Desktop\image-20210423094744592.png)



### 二.抓取样本所属panel(panel.txt)

```bash
#路径/mnt/vol2_ws/test/wbzhao/panel.sh
sh   panel.sh    id.txt    panel.txt
#              input list   output
```



2.  检查生成的panel.txt是否存在错误：一个编号来自多个panel的（例子如下）保留一个需要的panel

   ![image-20210423094813100](C:\Users\admin\Desktop\image-20210423094813100.png)

   找不到编号（例子如下)的删掉

   ![image-20210423094846614](C:\Users\admin\Desktop\image-20210423094846614.png)

### 三.抓取xlsx表格

1. ```bash
   #路径/mnt/vol2_ws/test/wbzhao/get_xlsx.sh
   sh   get_xlsx.sh   /mnt/vol1_root/rendong/project   panel.txt   data
   #                                     indir          list      out
   sh   get_xlsx.sh   /mnt/vol2_root/rendong/project   panel.txt   data
   ```

2. 检查抓到的文件数量与预期是否一致（如下图）：

   ![image-20210423094620900](C:\Users\admin\Desktop\image-20210423094620900.png)



### 四.抓取cnv文件

1. ```bash
   #路径/mnt/vol2_ws/test/wbzhao/cnv.sh
   #如果数据在vol2_root则修改indir路径
   perl   cnv.pl   /mnt/vol1_root/rendong/project   cnv_somatic  panel.txt   somatic
   #                                         indir     outdir      list     type
   perl   cnv.pl   /mnt/vol1_root/rendong/project   cnv_germline  panel.txt   germline
   ```

   

3. 检查生成的文件数量与预期是否一致

4. 最终使用的是输出文件夹中result文件夹中的数据（如下图）：

![image-20210423094921009](C:\Users\admin\Desktop\image-20210423094921009.png)

![image-20210423094941452](C:\Users\admin\Desktop\image-20210423094941452.png)![image-20210423094958111](C:\Users\admin\Desktop\image-20210423094958111.png)

